/* ===== THEME ===== */
:root{
  --bg:#f7f8fb;
  --surface:#ffffff;
  --elev:#f4f6fb;
  --ink:#0b0c0f;
  --muted:#5b6272;
  --line:#e6e9f2;

  --brand:#3f83f8;
  --brand-2:#9ed0ff;

  --ok:#1e9d68;
  --warn:#b88600;
  --err:#c23a3a;

  --chip:#f6f8ff;
  --chip-line:#d8def0;

  --radius:16px;
  --shadow: 0 12px 32px rgba(0,0,0,.12);
  --bg-grad-1:#f8fafc;
  --bg-grad-2:#eef2f7;
}

html.theme-dark{
  --bg:#0b0c0f; --surface:#111319; --elev:#171a21;
  --ink:#ecedf1; --muted:#a8afbf; --line:#242938;
  --brand:#5aa7ff; --brand-2:#9ed0ff;
  --ok:#58d68d; --warn:#ffd166; --err:#ff6b6b;
  --chip:#0f1320; --chip-line:#2b3550;
  --radius:16px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --bg-grad-1:#0a0b0e;
  --bg-grad-2:#0e1015;
}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
  margin:0;
  background:linear-gradient(180deg, var(--bg-grad-1) 0%, var(--bg-grad-2) 100%);
  color:var(--ink);
  font:15.5px/1.45 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background 250ms ease, color 250ms ease;
}
/* Smooth theme transitions for common surfaces/borders */
.card, .panel, .kpi, .table-wrap, table, th, td, input[type=number],
.seg, .btn, .chip, details {
  transition: background 250ms ease, color 250ms ease,
              border-color 250ms ease, box-shadow 250ms ease;
}
  .container{max-width:1000px;margin:0 auto;padding:28px 16px 96px}
  
header {
  position: static;
  top: 0;
  z-index: 10;
  backdrop-filter: saturate(120%) blur(6px);
  padding: 10px 0 6px;
  margin-bottom: 10px;
  background: linear-gradient(
    180deg,
    var(--bg-grad-1) 0%,
    var(--bg-grad-2) 100%
  );
  transition: background 0.3s ease;
}

/* Dark mode override */
html.theme-dark header {
  background: linear-gradient(180deg, #0c0f15cc 0%, #0c0f1500 100%);
}

.hstack{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;

  background: rgba(12,15,21,0.16);
  backdrop-filter: blur(18px) saturate(160%) contrast(105%);
  -webkit-backdrop-filter: blur(18px) saturate(160%) contrast(105%);
  box-shadow: none;
}
html.theme-dark .hstack{
  background: rgba(22,24,30,0.14);
  border: 1px solid rgba(255,255,255,0.08);
}
  .space{flex:1}
  .title{font-weight:800; letter-spacing:.2px; margin:0}
  .subtitle {
  display: block;
  font-size: 14px;
  font-weight: normal;
  margin-top: 4px;
}
  .hstack h3{font-weight: 350; margin: 0;}
  .subtle{color:var(--muted)}

  /* ===== Segmented control ===== */
  .seg{
    display:inline-grid; grid-auto-flow:column; gap:6px; padding:6px;
    background:var(--surface); border:1px solid var(--line); border-radius:999px;
  }
  .seg button{
    border:0; padding:10px 16px; border-radius:999px; cursor:pointer;
    color:var(--muted); background:transparent; font-weight:700; letter-spacing:.3px;
  }
  .seg button[aria-pressed="true"]{
    color:#0a0d13; background:linear-gradient(180deg,#bfe0ff 0%, #6ab0ff 100%);
  }

/* === Tabs + Theme toggle row === */
.seg-wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-top:8px;
}

/* === Theme toggle button === */
.theme-toggle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:40px;
  height:40px;
  border-radius:9999px;
  background:var(--surface);
  color:var(--ink);
  border:1px solid var(--line);
  cursor:pointer;
  transition:
    transform 180ms ease,
    background 250ms ease,
    color 250ms ease,
    border-color 250ms ease,
    box-shadow 250ms ease;
}
.theme-toggle:hover{
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(0,0,0,.08);
}
.theme-toggle:active{
  transform: translateY(0);
}
.theme-toggle .icon{
  font-size:16px;
  line-height:1;
}

/* === Language selector  === */
.lang-select {
  margin-left: 8px;
  padding: 4px 8px;
  border-radius: 8px;
  border: 1px solid var(--line);
  background: var(--surface);
  color: var(--ink);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background .3s ease, color .3s ease, border .3s ease;
}
.lang-select:hover { background: var(--elev); }

html.theme-dark .lang-select {
  background: #1e1e1e;
  color: #f0f0f0;
  border-color: #444;
}

  /* ===== Card ===== */
  .card{
    background:var(--surface); border:1px solid var(--line); border-radius:var(--radius);
    box-shadow:var(--shadow); padding:18px; margin-top:14px;
  }
  .card h2{margin:0 0 8px 0; font-weight:800}
  .hint{color:var(--muted); font-size:13px}

  /* ===== Form ===== */
  .grid{display:grid; grid-template-columns:240px 1fr; gap:12px; align-items:center}
  @media (max-width:720px){ .grid{grid-template-columns:1fr} }
  .label{font-weight:700}
  input[type=number]{
    width:100%; padding:12px 12px; color:var(--ink);
    background:var(--elev); border:1px solid var(--line); border-radius:12px; outline:none;
    transition:border-color .15s, box-shadow .15s;
  }
  input[type=number]:focus{border-color:var(--brand); box-shadow:0 0 0 4px #5aa7ff26}
  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button{appearance:none; margin:0}
  .toolbar{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px}
  .btn{
    border:1px solid var(--chip-line); background:linear-gradient(180deg,#1a2135 0%, #141b2c 100%);
    color:#e8f1ff; padding:12px 14px; border-radius:12px; cursor:pointer; font-weight:800; letter-spacing:.3px;
  }
  .btn.primary{border-color:#3b72ff; background:linear-gradient(180deg,#6ab0ff 0%, #3f83f8 100%); color:#0a0d13}
  .btn.ghost{background:transparent}
  .kpi{
    display:flex; gap:8px; flex-wrap:wrap; margin-top:10px
  }
.kpi .chip:has(.mono:empty) { display: none; }
  .chip{
    background:var(--chip); border:1px solid var(--chip-line); color:var(--ink);
    padding:8px 10px; border-radius:999px; font-weight:700
  }
  .chip.ok{border-color:#1f6f4e; color:var(--ok)}
  .chip.warn{border-color:#6b5e1f; color:var(--warn)}
  .chip.err{border-color:#6b1f2a; color:var(--err)}
  .msg{margin-top:8px; color:var(--muted)}
  .msg.err{color:var(--err)}

  /* ===== Table ===== */
  table{width:100%; border-collapse:collapse; margin-top:10px}
  th,td{border:1px solid var(--line); padding:10px; text-align:center}
  table thead th {
  background: var(--elev);
  color: var(--ink);
  font-weight: 800;
}
  table tfoot th {
  background: var(--surface);
  color: var(--ink);
  font-weight: 800;
}

  /* ===== Accordion for days ===== */
  details{background:var(--surface); border:1px solid var(--line); border-radius:12px; padding:8px 10px; margin-top:10px}
  summary{cursor:pointer; font-weight:800}
  summary::-webkit-details-marker{display:none}
  .badge{display:inline-block; padding:3px 8px; border-radius:999px; background:#13223a; color:#bfe0ff; margin-left:8px; font-size:12px}
 
  /* Footer */
  .foot{
      margin-top:8px; font-size:12px; color:var(--muted); 
}
  .footer-logo {
  max-width: 240px;
  height: auto;
  display: block;
  margin: 0 auto 10px;
}

  footer p{ 
    color:var(--muted); margin:0; 
}

footer .version{
  color:#4f8cff;
  font-weight:700;
  text-decoration:none;
  outline:none;
}

footer .version:hover{
  text-decoration:none;
  filter: drop-shadow(0 0 6px rgba(79,140,255,.55));
}

footer .version:focus-visible{
  outline:2px solid rgba(79,140,255,.65);
  outline-offset:2px;
  border-radius:4px;
}

/* ===== Responsive: mobile behavior ===== */
@media (max-width: 768px){
  .container{ width:100%; min-width:0; }
  body{ overflow-x:hidden; }
  .card{ overflow-x:auto; -webkit-overflow-scrolling: touch }
  .card table{ width:max-content; }
  #out #days details {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  #out #days details table {
    width: max-content;
    min-width: 100%;
  }
}

/* === Tables: cross-color row hover === */
table tbody tr:hover td{
  background:#eef4ff;
}
html.theme-dark table tbody tr:hover td{
  background:#111b2f;
}

@keyframes pulseCell{
  0%   { box-shadow: inset 0 0 0 0 rgba(63,131,248,0); }
  50%  { box-shadow: inset 0 0 0 9999px rgba(63,131,248,.06); }
  100% { box-shadow: inset 0 0 0 0 rgba(63,131,248,0); }
}
table tbody tr:hover td:nth-child(3){
  animation: pulseCell 800ms ease-in-out 1;
}

/* ===== No Rec ===== */

html, body, button, input, select, a, [role="button"] {
  -webkit-tap-highlight-color: transparent;
}

button:focus,
input:focus,
select:focus,
a:focus,
[role="button"]:focus,
.btn:focus {
  outline: none !important;
  box-shadow: none !important;
}

button:focus-visible,
input:focus-visible,
select:focus-visible,
a:focus-visible,
[role="button"]:focus-visible,
.btn:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(255, 200, 0, 0.6); 
  border-radius: 6px;
  transition: box-shadow 0.2s ease;
}

button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0 !important;
}
:-moz-focusring {
  outline: none !important;
}

.btn:focus,
.btn:active:focus,
.btn:focus-visible {
  box-shadow: none !important;
  outline: none !important;
}


button,
.btn {
  color: #000;
  text-shadow: none;
  transition: all 0.25s ease;
}

button:hover,
.btn:hover {
  color: #333;
  text-shadow: 0 0 4px rgba(0, 0, 0, 0.4);
}

button:active,
button:focus:active,
.btn:active,
.btn:focus:active {
  color: #fff !important;
  text-shadow: 0 0 6px rgba(255, 255, 255, 0.9),
               0 0 12px rgba(255, 255, 255, 0.7);
  transition: all 0.15s ease;
}
